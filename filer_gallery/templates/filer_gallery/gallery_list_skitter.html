{% load thumbnail sekizai_tags %}
{% addtoblock "css" %}<link href="{{ STATIC_URL }}filer_gallery/skitter/css/skitter.styles.css" type="text/css" media="all" rel="stylesheet" />{% endaddtoblock %}
{% addtoblock "css" %}<link href="{{ STATIC_URL }}filer_gallery/skitter.css" type="text/css" media="all" rel="stylesheet" />{% endaddtoblock %}

{% addtoblock "js" %}<script src="{{ STATIC_URL }}filer_gallery/skitter/js/jquery-1.6.3.min.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script src="{{ STATIC_URL }}filer_gallery/skitter/js/jquery.easing.1.3.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script src="{{ STATIC_URL }}filer_gallery/skitter/js/jquery.animate-colors-min.js"></script>{% endaddtoblock %}

{% addtoblock "js" %}<script src="{{ STATIC_URL }}filer_gallery/skitter/js/jquery.skitter.js"></script>{% endaddtoblock %}

{% for gallery in object_list %}
{% addtoblock "js" %}
<script type="text/javascript">
//<![CDATA[
var setImage{{ gallery.pk }} = function(i) {
    var skitter = skitter{{ gallery.pk }}
    if (skitter.settings.is_animating == false) {
        skitter.box_skitter.find('.box_clone').stop();
        skitter.clearTimer(true);
        
        skitter.settings.image_i = Math.floor(i);
    
        skitter.box_skitter.find('.image a').attr({'href': skitter.settings.link_atual});
        skitter.box_skitter.find('.image_main').attr({'src': skitter.settings.image_atual});
        skitter.box_skitter.find('.box_clone').remove();
        skitter.nextImage();
    }    
}
var skitter{{ gallery.pk }}
(function ($) {
    var config = {{ SKITTER_CONFIG|safe }}
    config.onLoad = function(skitter) {
        skitter{{ gallery.pk }} = skitter
    }
    $(document).ready(function () {
       $('#filer-gallery-{{ gallery.pk }}').skitter(config);
    });
})(jQuery)
//]]>
</script>
{% endaddtoblock %}

<div id="filer-gallery-{{ gallery.pk }}" class="box_skitter box_skitter_medium">
    <ul>
    {% for image in gallery.galleryimage_set.all %}
        <li>
            <a href="#"><img src="{% thumbnail image.image FILER_GALLERY_DISPLAY_SIZE %}" /></a>
            <div class="label_text">
                <p>{{ image.title }}</p>
            </div>
        </li>
    {% endfor %}
    </ul> 
</div>
{% for image in gallery.galleryimage_set.all %}

    <a href="#" onclick="setImage{{ gallery.pk }}({{ forloop.counter0 }});return false"><img src="{% thumbnail image.image "50x50" %}" /></a>

{% endfor %}

{% endfor %}

